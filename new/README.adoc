= cmd: new

Subcommands `workspace` (aias `ws`) and `package` (alias `pkg`)
initialize a Bazel environment.

To use: create file WORKSPACE.bazel containing:

```
load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_archive")

http_archive(
    name = "obazl",  ## do not change name
    url = "https://github.com/obazl/tools_obazl/archive/352c4a1b39f19c8f377d0dafda9e6233cf3aee52.zip",
    strip_prefix = "tools_obazl-352c4a1b39f19c8f377d0dafda9e6233cf3aee52",
    sha256 = "936feae1df3d46eb7e297a252c1003eebf3780fd64e0fa3f17974b9e0a347a94"
)
```

(Dev: add --override_repository to .bazelrc, e.g.

```
common --override_repository=obazl=/path/to/tools_obazl
```

Then: `$ bazel run @obazl//new:ws`

This will create some new files as described below.  Overwrites existing.

== @obazl//new:workspace

Alias: `@obazl//new:ws`

Step 1:  initialize workspace

`$ bazel run @obazl//new:ws`

Creates initial Bazel env: WORKSPACE.bazel, BUILD.bzl, //bzl, etc.

Step 2: configure OPAM coswitch

To integrate OPAM resources (including an OCaml toolchain), run:

`$ bazel run @mibl//coswitch -- -p <pkg>`

Step 3: dune conversion

Edit `.config/miblrc` to taste.

`$ bazel run @obazl//convert`



== @obazl//new:package

Alias: `@obazl//new:pkg` 
